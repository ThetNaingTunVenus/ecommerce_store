{% extends 'cashier/dashboardcashier.html' %}


{% block title %}Order Detail{% endblock title %}
{% block content %}

<div class="container">
    <div class="row mt-3">
        <div class="col-md-10 mx-auto">
            <h3>Order Detail</h3>
            <hr>
            <p><span class="font-weight-bold">Invoice No : </span> {{ord_obj.id}}</p>
            <p><span class="font-weight-bold">Status : </span>{{ord_obj.ordered_staus}}</p>
            <p><span class="font-weight-bold">Date : </span>{{ord_obj.created_at}}( {{ord_obj.created_at|timesince}}
                ago)</p>
            <p><span class="font-weight-bold">Customer : </span>{{ord_obj.ordered_by}}-({{ord_obj.mobile}})</p>
            <p><span class="font-weight-bold">Email : </span>{{ord_obj.email}}</p>
            <p><span class="font-weight-bold">Shipping Address : </span>{{ord_obj.shipping_address}}</p>
            <hr>
            <h4>Order Items</h4>
            <table class="table table-hover">
                <thead>
                <tr>
                    <th scope="col">SN</th>
                    <th scope="col">Product</th>
                    <th scope="col">Rate</th>
                    <th scope="col">Quantity</th>
                    <th scope="col">Subtotal</th>

                </tr>
                </thead>
                <tbody>

                {% for cp in ord_obj.cart.cartproduct_set.all %}
                <tr>
                    <th scope="row">{{forloop.counter}}</th>
                    <td><a target="_blank"
                           href="{% url 'ecoapp:productdetail' cp.product.slug %}">{{cp.product.title}}</a></td>
                    <td>{{cp.rate}}</td>
                    <td>{{cp.quantity}}</td>
                    <td>{{cp.subtotal}}</td>


                </tr>
                {% endfor %}
                <tr>
                    <th colspan="4" class="text-right">Total :</th>
                    <td>{{ord_obj.total}}</td>
                </tr>
                <tr>
                    <th colspan="4" class="text-right">Tax :</th>
                    <td>{{ord_obj.tax}}</td>
                </tr>
                <tr>
                    <th colspan="4" class="text-right">Grand Total :</th>
                    <td>{{ord_obj.all_total}}</td>
                </tr>
                <tr>
                    <th colspan="5" class="text-right">
                        <form action="{% url 'ecoapp:cashierorderstatuschange' ord_obj.id %}" method="post">
                {% csrf_token %}
                <select name="status">
                    {% for i, j in allstatus %}
                    <option value="{{i}}"{% if i == ord_obj.ordered_staus %} selected {% endif %}>{{j}}</option>
                    {% endfor %}
                </select>
                <button class="btn btn-sm btn-outline-info">change</button>

            </form>
                    </th>
                </tr>


                </tbody>
            </table>

<!--            <form action="{% url 'ecoapp:adminorderstatuschange' ord_obj.id %}" method="post">-->
<!--                {% csrf_token %}-->
<!--                <select name="status">-->
<!--                    {% for i, j in allstatus %}-->
<!--                    <option value="{{i}}">{{j}}</option>-->
<!--                    {% endfor %}-->
<!--                </select>-->
<!--                <button>change</button>-->

<!--            </form>-->

        </div>


    </div>
</div>

{% endblock %}